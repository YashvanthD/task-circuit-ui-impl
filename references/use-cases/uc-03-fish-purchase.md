# UC-03: Fish Purchase (Add to Existing Stock)

**Category:** Stock Management  
**Priority:** High - Core operation  
**Actors:** Farm Manager  
**Precondition:** Stock exists and is active

---

## Overview

Adding additional fish to an existing active stock through purchase.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FISH PURCHASE OVERVIEW                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  BEFORE                                          AFTER                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€                                          â”€â”€â”€â”€â”€                              â”‚
â”‚                                                                                      â”‚
â”‚  Stock: 444444444444                             Stock: 444444444444                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ current_count:  â”‚       Purchase 1000        â”‚ current_count:  â”‚                â”‚
â”‚  â”‚     5000        â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º      â”‚     6000        â”‚                â”‚
â”‚  â”‚                 â”‚          fish              â”‚                 â”‚                â”‚
â”‚  â”‚  ğŸŸğŸŸğŸŸğŸŸğŸŸ     â”‚                            â”‚ ğŸŸğŸŸğŸŸğŸŸğŸŸğŸŸ    â”‚                â”‚
â”‚  â”‚                 â”‚                            â”‚  (+1000)        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FISH PURCHASE FLOW                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”‚
â”‚  â”‚   User Request   â”‚                                                               â”‚
â”‚  â”‚                  â”‚                                                               â”‚
â”‚  â”‚ POST /purchases  â”‚                                                               â”‚
â”‚  â”‚ {                â”‚                                                               â”‚
â”‚  â”‚   stock_id,      â”‚                                                               â”‚
â”‚  â”‚   count: 1000,   â”‚                                                               â”‚
â”‚  â”‚   source,        â”‚                                                               â”‚
â”‚  â”‚   cost_per_unit  â”‚                                                               â”‚
â”‚  â”‚ }                â”‚                                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                               â”‚
â”‚           â”‚                                                                          â”‚
â”‚           â–¼                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       PurchaseService.create()                                â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ VALIDATION                                                              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Stock exists?                                                        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Stock belongs to org?                                                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Stock status = "active"?  â”€â”€â–º If not, return error                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ count > 0?                                                           â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                      â”‚                                        â”‚   â”‚
â”‚  â”‚                                      â–¼                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ CREATE PURCHASE RECORD                                                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  purchase_id = generate_key(12)                                        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  count = 1000                                                          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  total_cost = count Ã— cost_per_unit                                    â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                      â”‚                                        â”‚   â”‚
â”‚  â”‚                                      â–¼                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ UPDATE STOCK                                                            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  current_count += 1000  (5000 â†’ 6000)                                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  purchase_count += 1000                                                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  total_cost += purchase_total_cost                                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  recalculate biomass                                                   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚                                    â”‚                            â”‚              â”‚
â”‚    â–¼                                    â–¼                            â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚purchases â”‚                    â”‚  stocks  â”‚                 â”‚ activity â”‚         â”‚
â”‚  â”‚          â”‚                    â”‚          â”‚                 â”‚  _logs   â”‚         â”‚
â”‚  â”‚ INSERT   â”‚                    â”‚ UPDATE   â”‚                 â”‚          â”‚         â”‚
â”‚  â”‚          â”‚                    â”‚ current_ â”‚                 â”‚ INSERT x2â”‚         â”‚
â”‚  â”‚ count:   â”‚                    â”‚ count:   â”‚                 â”‚ â€¢ purchaseâ”‚        â”‚
â”‚  â”‚  1000    â”‚                    â”‚  +1000   â”‚                 â”‚ â€¢ stock_  â”‚         â”‚
â”‚  â”‚          â”‚                    â”‚          â”‚                 â”‚   added   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Impact Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PURCHASE DATA IMPACT                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚                          purchases collection                                        â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                         â”‚  purchase_id: xxx  â”‚                                      â”‚
â”‚                         â”‚  stock_id: 444...  â”‚                                      â”‚
â”‚                         â”‚  count: 1000       â”‚                                      â”‚
â”‚                         â”‚  cost: 5000        â”‚â—„â”€â”€â”€â”€â”€â”€â”€ NEW RECORD                   â”‚
â”‚                         â”‚  source: "XYZ"     â”‚                                      â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                   â”‚                                                  â”‚
â”‚                                   â”‚ Updates                                          â”‚
â”‚                                   â–¼                                                  â”‚
â”‚                          stocks collection                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â”‚   BEFORE                              AFTER                                  â”‚   â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€                              â”€â”€â”€â”€â”€                                  â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â”‚   current_count:  5000     â”€â”€â”€â”€â–º      current_count:  6000  (+1000)         â”‚   â”‚
â”‚  â”‚   purchase_count: 0        â”€â”€â”€â”€â–º      purchase_count: 1000  (+1000)         â”‚   â”‚
â”‚  â”‚   total_cost:     25000    â”€â”€â”€â”€â–º      total_cost:     30000 (+5000)         â”‚   â”‚
â”‚  â”‚   total_biomass:  50 kg    â”€â”€â”€â”€â–º      total_biomass:  60 kg (+10 kg)        â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚                                   â”‚                                                  â”‚
â”‚                                   â”‚ Logs                                             â”‚
â”‚                                   â–¼                                                  â”‚
â”‚                          activity_logs collection                                    â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                         â”‚ action: "purchase" â”‚                                      â”‚
â”‚                         â”‚ count: 1000        â”‚                                      â”‚
â”‚                         â”‚ source: "XYZ"      â”‚                                      â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                         â”‚ action: stock_addedâ”‚                                      â”‚
â”‚                         â”‚ count: 1000        â”‚                                      â”‚
â”‚                         â”‚ new_total: 6000    â”‚                                      â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Request

```http
POST /api/fish/purchases
Content-Type: application/json
Authorization: Bearer {token}

{
  "stock_id": "444444444444",
  "count": 1000,
  "avg_weight_g": 12,
  "source": "XYZ Hatchery",
  "source_contact": "9876543210",
  "cost_per_unit": 5,
  "total_cost": 5000,
  "purchase_date": "2026-01-28",
  "batch_number": "XYZ-2026-042",
  "invoice_number": "INV-2026-0042",
  "notes": "Additional fingerlings to supplement stock"
}
```

---

## API Response

```json
{
  "success": true,
  "message": "Purchase recorded successfully",
  "data": {
    "purchase_id": "555555555555",
    "stock_id": "444444444444",
    "pond_id": "222222222222",
    "count": 1000,
    "avg_weight_g": 12,
    "source": "XYZ Hatchery",
    "total_cost": 5000,
    "purchase_date": "2026-01-28",
    "stock_after": {
      "current_count": 6000,
      "purchase_count": 1000
    },
    "created_at": "2026-01-28T10:00:00Z"
  }
}
```

---

## Collections Affected

| Collection | Action | Field Changes |
|------------|--------|---------------|
| purchases | INSERT | New purchase record |
| stocks | UPDATE | current_count +1000, purchase_count +1000, total_cost +5000 |
| activity_logs | INSERT | 2 records (purchase + stock_added) |

---

## Stock Count Tracking

```
Stock Count Formula:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

current_count = initial_count 
                + purchase_count 
                + transfer_in_count 
                - mortality_count 
                - harvest_count 
                - transfer_out_count

Example:
  initial_count:      5000
  + purchase_count:   1000  â—„â”€â”€ This use case
  + transfer_in:         0
  - mortality_count:     0
  - harvest_count:       0
  - transfer_out:        0
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  current_count:      6000
```

---

## Business Rules

1. **Stock must be active** - Cannot add fish to terminated stock
2. **Count must be positive** - Cannot purchase 0 or negative fish
3. **Same species assumed** - Purchased fish are same species as stock
4. **Cost tracking** - Total cost added to stock.total_cost
5. **Weight averaging** - If new fish have different weight, recalculate average

---

## Acceptance Criteria

- [ ] Purchase record created
- [ ] Stock.current_count increases by purchase count
- [ ] Stock.purchase_count increases
- [ ] Stock.total_cost updated
- [ ] Activity logs created
- [ ] Returns 404 if stock not found
- [ ] Returns 400 if stock not active

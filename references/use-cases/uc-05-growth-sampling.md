# UC-05: Growth Sampling

**Category:** Daily Operations  
**Priority:** High - Critical for tracking  
**Actors:** Worker, Farm Manager  
**Precondition:** Stock exists and is active

---

## Overview

Recording fish growth measurements. **Sampling does NOT change fish count** - it only updates average weight.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           GROWTH SAMPLING OVERVIEW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  âš ï¸ IMPORTANT: Sampling does NOT change fish count                                  â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         Sample 20 fish         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Stock: 6000     â”‚      Avg weight: 250g          â”‚ Stock: 6000     â”‚            â”‚
â”‚  â”‚ Avg wt: 200g    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º          â”‚ Avg wt: 250g    â”‚            â”‚
â”‚  â”‚                 â”‚                                â”‚ (weight updated)â”‚            â”‚
â”‚  â”‚  ğŸŸğŸŸğŸŸğŸŸğŸŸğŸŸ   â”‚                                â”‚  ğŸŸğŸŸğŸŸğŸŸğŸŸğŸŸ   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                            â”‚                        â”‚
â”‚                                                            â–¼                        â”‚
â”‚                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                                                    â”‚   samplings   â”‚               â”‚
â”‚                                                    â”‚  collection   â”‚               â”‚
â”‚                                                    â”‚               â”‚               â”‚
â”‚                                                    â”‚  NEW RECORD   â”‚               â”‚
â”‚                                                    â”‚  250g avg     â”‚               â”‚
â”‚                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           GROWTH SAMPLING FLOW                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”‚
â”‚  â”‚   User Request   â”‚                                                               â”‚
â”‚  â”‚                  â”‚                                                               â”‚
â”‚  â”‚ POST /samplings  â”‚                                                               â”‚
â”‚  â”‚ {                â”‚                                                               â”‚
â”‚  â”‚   stock_id,      â”‚                                                               â”‚
â”‚  â”‚   sample_count,  â”‚                                                               â”‚
â”‚  â”‚   total_weight_g,â”‚                                                               â”‚
â”‚  â”‚   avg_weight_g   â”‚                                                               â”‚
â”‚  â”‚ }                â”‚                                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                               â”‚
â”‚           â”‚                                                                          â”‚
â”‚           â–¼                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       SamplingService.create()                                â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ VALIDATION                                                              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Stock exists and active?                                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ sample_count > 0?                                                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ avg_weight_g calculated correctly?                                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚   (total_weight_g / sample_count)                                      â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                      â”‚                                        â”‚   â”‚
â”‚  â”‚                                      â–¼                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ CREATE SAMPLING RECORD                                                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  sampling_id = generate_key(12)                                        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  sample_count = 20                                                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  total_weight_g = 5000                                                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  avg_weight_g = 250                                                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  calculate weight_gain from previous sampling                          â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                      â”‚                                        â”‚   â”‚
â”‚  â”‚                                      â–¼                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ UPDATE STOCK WEIGHT                                                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  current_avg_weight_g = 250                                            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  total_biomass_kg = current_count Ã— avg_weight_g / 1000                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                    = 6000 Ã— 250 / 1000 = 1500 kg                       â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  âš ï¸ current_count NOT changed                                          â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚                                    â”‚                            â”‚              â”‚
â”‚    â–¼                                    â–¼                            â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚samplings â”‚                    â”‚  stocks  â”‚                 â”‚ activity â”‚         â”‚
â”‚  â”‚          â”‚                    â”‚          â”‚                 â”‚  _logs   â”‚         â”‚
â”‚  â”‚ INSERT   â”‚                    â”‚ UPDATE   â”‚                 â”‚          â”‚         â”‚
â”‚  â”‚          â”‚                    â”‚ current_ â”‚                 â”‚ INSERT   â”‚         â”‚
â”‚  â”‚ avg:     â”‚                    â”‚ avg_wt:  â”‚                 â”‚"Sampled  â”‚         â”‚
â”‚  â”‚ 250g     â”‚                    â”‚  250g    â”‚                 â”‚ 250g"    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Sampling Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SAMPLING PROCESS                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Step 1: Catch Sample                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚   ğŸ£ Use cast net to catch 15-25 fish randomly                              â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                                         â”‚
â”‚                            â–¼                                                         â”‚
â”‚  Step 2: Weigh Fish                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚   âš–ï¸  Weigh all fish together: Total = 5000g (20 fish)                      â”‚    â”‚
â”‚  â”‚   OR                                                                         â”‚    â”‚
â”‚  â”‚   âš–ï¸  Weigh individually and record min/max                                 â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                                         â”‚
â”‚                            â–¼                                                         â”‚
â”‚  Step 3: Calculate Average                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚   ğŸ“Š Average = Total Weight / Sample Count                                  â”‚    â”‚
â”‚  â”‚              = 5000g / 20 = 250g                                            â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                                         â”‚
â”‚                            â–¼                                                         â”‚
â”‚  Step 4: Release Fish                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚   ğŸŸ Return all fish to pond gently                                         â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Growth Tracking

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           GROWTH CURVE TRACKING                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Weight (g)                                                                         â”‚
â”‚     â”‚                                                                                â”‚
â”‚ 800 â”‚                                                    â”Œâ”€â”€â”€â”€â”€â”€ Harvest Ready      â”‚
â”‚     â”‚                                                 â—â”€â”€â”¤                          â”‚
â”‚ 700 â”‚                                              â—     â””â”€â”€â”€â”€â”€â”€ 800g target        â”‚
â”‚     â”‚                                           â—                                    â”‚
â”‚ 600 â”‚                                        â—                                       â”‚
â”‚     â”‚                                     â—                                          â”‚
â”‚ 500 â”‚                                  â—                                             â”‚
â”‚     â”‚                               â—                                                â”‚
â”‚ 400 â”‚                            â—                                                   â”‚
â”‚     â”‚                         â—                                                      â”‚
â”‚ 300 â”‚                      â—                                                         â”‚
â”‚     â”‚                   â—      â—„â”€â”€â”€ Current: 250g                                   â”‚
â”‚ 200 â”‚                â—                                                               â”‚
â”‚     â”‚             â—                                                                  â”‚
â”‚ 100 â”‚          â—                                                                     â”‚
â”‚     â”‚       â—                                                                        â”‚
â”‚  10 â”‚    â—                                                                           â”‚
â”‚     â”‚ â—                                                                              â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚        0    30    60    90   120   150   180   210   240  Days                      â”‚
â”‚                                                                                      â”‚
â”‚  Growth Rate = (Current Weight - Previous Weight) / Days Between Samplings         â”‚
â”‚             = (250g - 200g) / 14 days = 3.57 g/day                                 â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Request

```http
POST /api/fish/samplings
Content-Type: application/json
Authorization: Bearer {token}

{
  "stock_id": "444444444444",
  "sampling_date": "2026-01-25",
  "sample_count": 20,
  "total_weight_g": 5000,
  "avg_weight_g": 250,
  "min_weight_g": 200,
  "max_weight_g": 310,
  "length_cm": 22,
  "condition_factor": 1.2,
  "health_status": "good",
  "notes": "Fish active and healthy, uniform size"
}
```

---

## API Response

```json
{
  "success": true,
  "message": "Sampling recorded successfully",
  "data": {
    "sampling_id": "777777777777",
    "stock_id": "444444444444",
    "pond_id": "222222222222",
    "sampling_date": "2026-01-25",
    "sample_count": 20,
    "avg_weight_g": 250,
    "previous_avg_weight_g": 200,
    "weight_gain_g": 50,
    "growth_rate_g_per_day": 3.57,
    "days_since_last_sampling": 14,
    "stock_updated": {
      "current_avg_weight_g": 250,
      "total_biomass_kg": 1500
    },
    "created_at": "2026-01-25T10:00:00Z"
  }
}
```

---

## Growth History Endpoint

```http
GET /api/fish/stocks/444444444444/samplings
```

```json
{
  "success": true,
  "data": {
    "stock_id": "444444444444",
    "samplings": [
      { "date": "2026-01-01", "avg_weight_g": 10, "growth_rate": null },
      { "date": "2026-01-15", "avg_weight_g": 50, "growth_rate": 2.86 },
      { "date": "2026-01-22", "avg_weight_g": 100, "growth_rate": 7.14 },
      { "date": "2026-02-01", "avg_weight_g": 150, "growth_rate": 5.0 },
      { "date": "2026-02-15", "avg_weight_g": 200, "growth_rate": 3.57 },
      { "date": "2026-03-01", "avg_weight_g": 250, "growth_rate": 3.57 }
    ],
    "overall_stats": {
      "avg_growth_rate_g_per_day": 4.0,
      "total_days": 60,
      "total_weight_gain_g": 240
    }
  }
}
```

---

## Collections Affected

| Collection | Action | Field Changes |
|------------|--------|---------------|
| samplings | INSERT | New sampling record |
| stocks | UPDATE | current_avg_weight_g, total_biomass_kg |
| activity_logs | INSERT | Action: "sampling" |

---

## Alerts Triggered

| Condition | Alert |
|-----------|-------|
| Growth rate < 50% expected | `abnormal_growth` warning |
| Weight >= market_size_kg | `harvest_ready` info |
| Condition factor < 0.8 | `poor_condition` warning |

---

## Business Rules

1. **No count change** - Sampling does NOT affect fish count
2. **Stock must be active** - Cannot sample terminated stock
3. **Sample count reasonable** - Typically 15-30 fish
4. **Auto-calculate biomass** - `biomass = count Ã— avg_weight / 1000`
5. **Growth rate tracking** - Compare to previous sampling

---

## Acceptance Criteria

- [ ] Sampling record created
- [ ] Stock.current_avg_weight_g updated
- [ ] Stock.total_biomass_kg recalculated
- [ ] Growth rate calculated from previous sampling
- [ ] Activity log created
- [ ] Fish count NOT changed
- [ ] Harvest ready alert if at market weight

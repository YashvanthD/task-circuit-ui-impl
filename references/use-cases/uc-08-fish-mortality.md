# UC-08: Fish Mortality

**Category:** Stock Management  
**Actors:** Worker, Farm Manager  
**Precondition:** Stock exists and is active

---

## Overview

Recording fish deaths. This **DECREASES fish count**.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FISH MORTALITY OVERVIEW                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  BEFORE                                          AFTER                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€                                          â”€â”€â”€â”€â”€                              â”‚
â”‚                                                                                      â”‚
â”‚  Stock: 6000 fish                                Stock: 5950 fish                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       50 fish died          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚                 â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º       â”‚                 â”‚               â”‚
â”‚  â”‚  ðŸŸðŸŸðŸŸðŸŸðŸŸðŸŸ   â”‚                             â”‚  ðŸŸðŸŸðŸŸðŸŸðŸŸ     â”‚               â”‚
â”‚  â”‚  mortality: 0   â”‚                             â”‚  mortality: 50  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MORTALITY RECORDING FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  POST /mortalities â”€â”€â–º Validate â”€â”€â–º Create Record â”€â”€â–º Update Stock                  â”‚
â”‚  {                                                                                   â”‚
â”‚    stock_id,                      mortalities          stocks                       â”‚
â”‚    count: 50,                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚    cause: "disease"               â”‚ INSERT â”‚          â”‚ UPDATE â”‚                   â”‚
â”‚  }                                â”‚        â”‚          â”‚ count  â”‚                   â”‚
â”‚                                   â”‚ 50 diedâ”‚          â”‚ -50    â”‚                   â”‚
â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ mort   â”‚                   â”‚
â”‚                                                       â”‚ +50    â”‚                   â”‚
â”‚                                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                          â”‚                                          â”‚
â”‚                                          â–¼                                          â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                               â”‚ Check High Mortalityâ”‚                               â”‚
â”‚                               â”‚ Alert Threshold     â”‚                               â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                          â”‚                                          â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                        â”‚                                   â”‚                       â”‚
â”‚                        â–¼                                   â–¼                       â”‚
â”‚               > 2% in 24 hours?                    Normal mortality                â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚               â”‚ CREATE ALERT   â”‚                   â”‚   No alert     â”‚             â”‚
â”‚               â”‚ high_mortality â”‚                   â”‚   created      â”‚             â”‚
â”‚               â”‚ severity:      â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚               â”‚ critical       â”‚                                                   â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Mortality Causes

| Cause | Description |
|-------|-------------|
| disease | Bacterial, viral, parasitic infections |
| water_quality | Low DO, ammonia poisoning, pH shock |
| predator | Birds, snakes, other predators |
| handling | Transport or handling stress |
| weather | Extreme temperature, flooding |
| unknown | Cause not determined |

---

## API Request

```http
POST /api/fish/mortalities
Content-Type: application/json

{
  "stock_id": "444444444444",
  "mortality_date": "2026-02-15",
  "count": 50,
  "cause": "disease",
  "symptoms": "Red spots on body, lethargy",
  "estimated_weight_kg": 15,
  "disposal_method": "buried",
  "notes": "Suspected EUS outbreak"
}
```

---

## Collections Affected

| Collection | Action | Field Changes |
|------------|--------|---------------|
| mortalities | INSERT | New mortality record |
| stocks | UPDATE | current_count -50, mortality_count +50 |
| activity_logs | INSERT | 2 records (mortality + stock_removed) |
| alerts | INSERT (conditional) | If > 2% in 24 hours |

---

## Acceptance Criteria

- [ ] Mortality record created
- [ ] Stock.current_count decreases
- [ ] Stock.mortality_count increases
- [ ] Activity logs created
- [ ] High mortality alert if threshold exceeded
